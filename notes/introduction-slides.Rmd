---
title: "Introduction to R"
author: "Alex Hollingsworth, Grant McDermott, and Kelli Marquardt"
institute: "Indiana University | University of Oregon | Chicago FED"
date: "`r Sys.Date()`"
output:
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      ratio: '16:9'
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      css: [kunoichi, metropolis, robot-fonts]
---
<style type="text/css">
.remark-slide-content {
    font-size: 25px;
    padding: 1em 4em 1em 4em;
}
</style>

```{r set-up, echo = FALSE}
# From https://www.garrickadenbuie.com/blog/highlight-lines-without-breaking-the-code-in-xaringan/
hook_source <- knitr::knit_hooks$get('source')
knitr::knit_hooks$set(source = function(x, options) {
  x <- stringr::str_replace(x, "^[[:blank:]]?([^*].+?)[[:blank:]]*#<<[[:blank:]]*$", "*\\1")
  hook_source(x, options)
})
```
# This document was made using R-Markdown.

- R-Markdown is great because you can combine text with R code and results. 

  - Text is formatted using markdown syntax, 
  - It's saved as an `.Rmd` file. 

- You can also just simply write `.R` code that is analogous to a `.do` file where there's a list of commands with comments. No need for this fancy `.Rmd` Markdown business. 

---
# This document was made using R-Markdown.

- It's pretty cool to integrate code with results right into the presentation. 

Input
```{r echo=FALSE, class.output="r", comment=""}
cat("```{r} \n sin(3) \n```")
```

--

Output
```{r}
sin(3)
```

---
# Running code 

### Code Chunks
This is a code chunk that will evaluate the command  `sin(3)` 

```{r echo=FALSE, class.output="r", comment=""}
cat("```{r} \n sin(3) \n```")
```

The output of this will appear as follows:

```{r, echo = FALSE, eval = TRUE}
sin(3)
```

--

### Inline Code

You can also create calculations inline for example <code> r  sin(3) </code>
 will evaluate `sin(3)`. With output rendering like this `r sin(3)`.

---
# Loading packages
```{r}
library(ggplot2)
library(dplyr)
```

You can install packages using the `install.packages()` syntax, but see the section on `pacman` below before worrying about that. 

---
# Viewing data
```{r head-of-data} 
head(diamonds)
```

---
# Viewing data

We can get a list of column names fairly easily too

```{r list-of-column-names}
names(diamonds)
```

---
# Viewing data

```{r mean-price-by-color}
diamonds %>% group_by(color) %>% summarise(mean(price)) 
```

Here the pipe command `%>%` will take the output from the command on the left and "pipes" it as input to the command on the right. 

---
# Viewing data

```{r mean-price-by-color-cleaner}
diamonds %>% 
  group_by(color) %>% 
  summarise(mean(price)) 
```

1. You can just move onto a new line without an error. This is neat because it allows us to write cleaner code and you don't need a delimiter or the `///` you may be used to from stata. So we can rewrite the above like this. 
1. In more recent versions of R (4.1 and above), you don't need to have `dpylr` installed to pipe. You can do the same thing using `|>`. 

---
# Summary statistics table

First, load the model summary package 
```{r load-modelsummary}
library(modelsummary)
```

---
# Summary statistics table

Now we can use the `datasummary_skim` function. 

```{r summary-table}
datasummary_skim(diamonds)
```

---
# Summary statistics table

But not every variable is numeric. `datasummary` has this covered with the `type = "categorical"` sub-option. 

```{r summary-table-categorical}
datasummary_skim(diamonds, type = "categorical")
```

---
# Graphing

.pull-left[
```{r ggplot-1, eval = FALSE}
ggplot(data = diamonds, aes(y = price, x = carat)) +
    geom_point() 
```
]

.pull-right[
```{r ggplot-1-out, ref.label="ggplot-1", echo=FALSE}
```
]
---
# Graphing

.pull-left[
```{r ggplot-2, eval = FALSE}
ggplot(data = diamonds, aes(y = price, x = carat)) +
    geom_point() +
    theme_classic() #<<
```
]

.pull-right[
```{r ggplot-2-out, ref.label="ggplot-2", echo=FALSE}
```
]

---
# Graphing

.pull-left[
```{r ggplot-3, eval = FALSE}
base_plot = ggplot(data = diamonds, aes(y = price, x = carat)) +
    geom_point()

base_plot + #<<
  {{theme_classic()}} #<<
```
]

.pull-right[
```{r ggplot-3-out, ref.label="ggplot-3", echo=FALSE}
```
]

---
# Graphing

.pull-left[
```{r ggplot-5, eval = FALSE}
ggplot(data = diamonds, aes(y = price, x = carat)) +
    geom_point(alpha = .1) + #<<
    theme_classic()
```
]

.pull-right[
```{r ggplot-5-out, ref.label="ggplot-5", echo=FALSE}
```
]

---
# Graphing

.pull-left[
```{r ggplot-6a, eval = FALSE}
ggplot(data = diamonds, aes(y = price, x = carat)) +
    geom_point(alpha = .1) +
    theme_classic() + 
    theme(text = element_text(size = 18)) + #<<
    labs(title = "Larger diamonds cost more", 
          subtitle = "Price, $",
          y = "", 
          x = "Carat")
```
]

.pull-right[
```{r ggplot-6a-out, ref.label="ggplot-6a", echo=FALSE}
```
]

---
# Graphing

.pull-left[
```{r ggplot-6b, eval = FALSE}
ggplot(data = diamonds, aes(y = price, x = carat)) +
    geom_point(alpha = .1) +
    theme_classic() + 
    theme(text = element_text(size = 18)) +
    labs(title = "Larger diamonds cost more", #<<
          subtitle = "Price, $", #<<
          y = "",  #<<
          x = "Carat") #<<
```
]

.pull-right[
```{r ggplot-6b-out, ref.label="ggplot-6b", echo=FALSE}
```
]

---
# Graphing

.pull-left[
```{r ggplot-7, eval = FALSE}
ggplot(data = diamonds, aes(y = price, x = carat)) +
    geom_point(alpha = .1) +
    facet_wrap(~color) + #<<
    theme_classic() + 
    theme(text = element_text(size = 18)) +
    labs(title = "Larger diamonds cost more", 
          subtitle = "Price, $", 
          y = "",  
          x = "Carat") 
```
]

.pull-right[
```{r ggplot-7-out, ref.label="ggplot-7", echo=FALSE}
```
]


---
# Graphing

.pull-left[
```{r ggplot-8, eval = FALSE}
ggplot(data = diamonds, aes(y = price, x = carat, color = clarity)) + #<<
    geom_point(alpha = .1) +
    facet_wrap(~color) +
    theme_classic() + 
    theme(text = element_text(size = 14)) +
    labs(title = "Larger diamonds cost more by diamond color", 
          subtitle = "Price, $",
          y = "", 
          x = "Carat")
```
]

.pull-right[
```{r ggplot-8-out, ref.label="ggplot-8", echo=FALSE}
```
]


---
# Graphing

.pull-left[
```{r ggplot-9, eval = FALSE}
ggplot(data = diamonds, aes(y = price, x = carat, color = clarity)) + 
    geom_point(alpha = .1) +
    facet_wrap(~color) +
    geom_smooth(method = "lm") + #<<
    theme_classic() + 
    theme(text = element_text(size = 14)) +
    labs(title = "Larger diamonds cost more by diamond color", 
          subtitle = "Price, $",
          y = "", 
          x = "Carat")
```
]

.pull-right[
```{r ggplot-9-out, ref.label="ggplot-9", echo=FALSE, message=FALSE }
```
]

---
# Graphing

.pull-left[
```{r ggplot-9b, eval = FALSE}
ggplot(data = diamonds, aes(y = price, x = carat, color = clarity)) + 
    geom_point(alpha = .1) + #<<
    facet_wrap(~color) +
    geom_smooth(method = "lm") + 
    theme_classic() + 
    theme(text = element_text(size = 14)) +
    labs(title = "Larger diamonds cost more by diamond color", 
          subtitle = "Price, $",
          y = "", 
          x = "Carat")
```
]

.pull-right[
```{r ggplot-9b-out, ref.label="ggplot-9b", echo=FALSE, message=FALSE }
```
]

---
# Graphing

.pull-left[
```{r ggplot-10, eval = FALSE}
ggplot(data = diamonds, aes(y = price, x = carat, color = clarity)) + 
    facet_wrap(~color) +
    geom_smooth(method = "lm") + 
    theme_classic() + 
    theme(text = element_text(size = 14)) +
    labs(title = "Larger diamonds cost more by diamond color", 
          subtitle = "Price, $",
          y = "", 
          x = "Carat")
```
]

.pull-right[
```{r ggplot-10-out, ref.label="ggplot-10", echo=FALSE, message=FALSE }
```
]

---
# Let's switch over to an R-Markdown document

### Also look. Some latex

$$
f(x) = \frac{1}{\sigma\sqrt{2\pi}} 
  \exp\left( -\frac{1}{2}\left(\frac{x-\mu}{\sigma}\right)^{2}\,\right)
$$
---
exclude: true

```{r, generate pdfs, include = F, eval = F}
pagedown::chrome_print("introduction-slides.html", output = "introduction-slides.pdf")
```